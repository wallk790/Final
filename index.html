<html>
<head>

</head> 

<body>

<div class="text"> </div>

<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<!-- put script here to call to library -->


<script>

/*
	To get backend running: 
	1. Open Terminal.
	2. "cd" to the directory with your node app.
	3. run "node app.js"
*/

// nytimes articles
var articles = ["http://www.nytimes.com/2015/03/29/magazine/debunking-the-myth-of-the-job-stealing-immigrant.html"];

var articleURL = articles[0];

$.ajax({
	url: "http://127.0.0.1:1337/getData?url="+articleURL,
	type: "GET",
	crossDomain: true,
    dataType: 'jsonp',
	success: function (response) {
		// The request succeeded
		//console.log(response);
		//console.log(response.results.comments);
		//console.log(response.results.comments.sentiment);
		findAlien(response);
		handleJSON(response);
	},
	error: function (xhr, status) {
		// The request failed
    	console.log(status);
	}

});

// handle JSON data from node backend
function handleJSON(data) {	
		for (var i = 0; i < data.results.comments.length; i++) {
		$(".text").append("<p>" + data.results.comments[i].commentBody + "</p>");
		$(".text").append("<p>" + data.results.comments.sentiment + "</p>");
		}

}

//finding word alien 
function findAlien(data) {

	// for (var i = 0; i < data.results.comments.length; i++) {
	// 	var str = data.results.comments[i].commentBody;
	// 	var n = str.indexOf("alien");
	// 	console.log(n);

	// 	if (n > -1 ) {
	//  		$(".text").append("<p>" + str + "</p>");
	// 	}
	// }
}


/*
$.getJSON('timesOut1.json', function(data) {
    // loop through each comment
 

			for (var i = 0; i < data.results.comments.length; i++) {
				// get the comment body
				var comment = data.results.comments[i].commentBody;
				console.log(comment);	

			}

						var container = document.querySelector('text');

			var paragraph = document.createElement('p');
			paragraph.setAttribute("class", "text");
			paragraph.innerHTML = "these are comments" + comment;

			paragraph.appendChild(container);
				
				// do sentiment analysis
});
*/

</script>

</body>
</html>